# Coursework
**Общая структура**

Программа представляет собой полнофункциональное десктоп‑приложение на Python с использованием:

tkinter — графический интерфейс (GUI);

sqlite3 — локальная база данных;

logging — логирование событий;

matplotlib — построение графиков в реальном времени;

smtplib и email — отправка email‑уведомлений;

threading — фоновый сбор данных;

прочие модули для работы с файлами, датами, случайными значениями и т.п.

Главный класс — RadiationMonitoringSystem, который инициализирует и управляет всеми компонентами.

**Основные функции и компоненты**

**1. Инициализация и конфигурация**

При запуске:

задаёт размеры окна и заголовок;

загружает настройки (пороговые значения, SMTP‑сервер, контакты и т.п.);

создаёт структуру БД (sensors, measurements, alerts);

заполняет БД тестовыми датчиками;

настраивает логирование (файл + консоль).

**2. База данных**

Использует SQLite для хранения:

**датчиков** (sensors): ID, название, местоположение, порог, дата калибровки, статус;

**измерений** (measurements): время, уровень радиации, статус, ссылка на датчик;

**оповещения** (alerts): тип, пороговое и фактическое значение, время, флаг отправки.

**3. Графический интерфейс (GUI)**

Реализован через ttk.Notebook с 6 вкладками:

**Панель управления**

карточки датчиков с текущим значением, статусом, индикатором цвета (зелёный/оранжевый/красный);

кнопка ручного обновления, сброса аварий, теста оповещения;

график в реальном времени (matplotlib) по всем датчикам.

**Датчики**

таблица со списком датчиков (ID, название, участок, порог и т.д.);

кнопки: добавить, редактировать, калибровать, обновить.

**Сбор данных**

статистика (всего измерений, за сегодня, превышений, последнее обновление);

журнал последних измерений в таблице.

**Уведомления**

настройка порогов предупреждения и опасности;

список контактов для оповещений (email, телефоны);

журнал оповещений (тип, датчик, уровень, статус отправки);

кнопки: сохранить настройки, тест оповещения, очистить журнал.

**Отчёты**

кнопки для генерации CSV‑отчётов: суточный, недельный, месячный, статистический, по событиям;

экспорт всех данных;

статистика БД (размер, количество записей, первая/последняя запись).

**Настройки**

поля для изменения интервала опроса, порогов, SMTP‑настроек;

кнопки: сохранить, сбросить к умолчаниям, резервное копирование, восстановление.

**4. Сбор данных**

Работает в фоновом потоке (threading.Thread).

Каждые polling_interval секунд (config['polling_interval'], по умолчанию 5 сек):

имитирует замеры с датчиков (случайные значения с вариацией);

иногда генерирует аномалии (вероятность 10 %);

определяет статус: «НОРМА», «ПРЕДУПРЕЖДЕНИЕ», «ОПАСНО»;

сохраняет измерение в БД и в оперативную память;

обновляет GUI (карточки датчиков, таблицу измерений);

проверяет пороги и при превышении отправляет оповещения.

**5. Оповещения**

При превышении порога:

записывает событие в таблицу alerts;

отправляет email (в коде — закомментирована реальная отправка, только логирование);

различает типы: WARNING (превышение предупредительного порога) и CRITICAL (критический порог).

Есть кнопка «Тест оповещения» для проверки.

**6. Отчёты и экспорт**

Суточный отчёт (CSV): среднее, максимум, минимум, количество замеров по датчикам за сегодня.

Статистический отчёт (CSV): общая статистика по всем измерениям (среднее, макс, мин, количество предупреждений, процент аномалий).

Экспорт всех данных (CSV): все измерения с датой, датчиком, участком, уровнем и статусом.

Недельные/месячные/по событиям — в стадии разработки (выводят сообщение).

**7. Обслуживание БД и настроек**

Резервное копирование: копирует файл БД в radiation_system_backup_<дата_время>.db.

Восстановление из бэкапа — в разработке.

Сохранение настроек: пишет system_config.json.

Очистка журнала оповещений: удаляет все записи из таблицы alerts.

**8. Логирование**

Пишет в файл radiation_monitoring.log и в консоль.

Фиксирует: запуск, ошибки, сохранения, оповещения, превышения порогов и т.п.

**9. Визуализация**

**График в реальном времени** (matplotlib):

отображает динамику уровня радиации по всем датчикам;

обновляется при каждом цикле сбора данных;

автоматически масштабируется.

**Ключевые пороги и статусы**

**Предупреждение:** уровень ≥ warning_threshold (по умолчанию 1,0 мкЗв/ч).

**Опасность:** уровень ≥ danger_threshold (по умолчанию 2,5 мкЗв/ч).

Статусы: «НОРМА», «ПРЕДУПРЕЖДЕНИЕ», «ОПАСНО».

**Используемые внешние модули и файлы**

**БД:** radiation_monitoring.db.

**Логи:** radiation_monitoring.log.

**Настройки:** system_config.json (сохраняются при изменении).

**Бэкапы:** radiation_system_backup_<дата_время>.db.

**Отчёты:** CSV‑файлы с датой в имени.

**Ограничения и «в разработке»**

Отправка email не реализована (только логирование).

Функции: редактирование датчика, калибровка, недельный/месячный отчёты, отчёт по событиям, восстановление из бэкапа — в разработке (выводят информационные сообщения).

**Итог**

Программа предоставляет:

мониторинг уровня радиации с нескольких датчиков;

хранение данных в SQLite;

GUI с вкладками для управления, просмотра, отчётов и настроек;

оповещения при превышении порогов;

генерацию отчётов в CSV;

резервное копирование;

график в реальном времени;

логирование всех событий.

**Цель:** контроль радиационной обстановки с возможностью оперативного реагирования на аномалии.
